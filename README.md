# Редактор интеллектуальной интегрированной системы дорожного движения

## 1. Назначение программы
Данное программное обеспечение разработано для моделирования и тестирования технологий искусственного интеллекта в условиях городской транспортной инфраструктуры. Программа позволяет создавать виртуальную схему города с правосторонним движением транспорта, добавлять и настраивать объекты (светофоры, пешеходные переходы, пешеходов, знаки "Движение запрещено"), управлять режимами работы светофоров и проводить тестовые сценарии движения транспорта.

### 1.1. Системные требования
- Операционная система: Windows 10/11 (64-bit)  
- Python 3.8+ с библиотекой PyQt5  
- База данных: SQLite (встроенная)  
- Графические ресурсы: Архив `Прил_ОЗ_КОД 09.02.08-1-2026-М1.zip`  

### 1.2. Запуск программы
Запустите исполняемый файл `launch.bat`. При первом запуске автоматически загружаются базовые сцены из файлов `map.json` и `cars.json`.

---

## 2. Компонентная база изделия

### 2.1. Программная часть
Программа построена на языке Python с использованием библиотеки PyQt5 для графического интерфейса и SQLite для хранения статистики.

---

## 3. Основной интерфейс

### 3.1. Панели и кнопки
- **Левая панель инструментов** — кнопки добавления объектов со значками (светофор, переход, пешеход, знак).  
- **Правая панель свойств** — автоматически показывает настройки выделенного объекта (цвет светофора, таймер пешехода, тип запрета движения). Кнопка "Удалить объект" активна при выделении.  
- **Верхние кнопки** — "Показать панель", "Запуск", "Таблица".  
- **Нижняя панель управления** — показывает текущий режим работы.  

### 3.2. Отображение координат
При наведении курсора на дорогу (вертикальную/горизонтальную/перекресток) в верхнем левом углу появляется label с координатами ячейки (X, Y). Координаты округляются до сетки 35×35 пикселей.

### 3.3. Логотип и наименование
В левом верхнем углу программы представлен логотип в виде иконки светофора с зелёным сигналом, а также название «Редактор интеллектуальной интегрированной системы дорожного движения».

### 3.4. Скриншот интерфейса 
<img width="1136" height="1020" alt="image" src="https://github.com/user-attachments/assets/562b94d8-eafc-4972-97a3-65fe5c9e83e0" />

---

## 4. Функции приложения

### 4.1. Добавление объектов
Для начала необходимо выбрать тип на левой панели:
- светофор  
- пешеходный переход  
- пешеход  
- движение запрещено  


### 4.2. Алгоритм добавления объектов
1. Нажмите кнопку объекта на левой панели.  
2. Наведите курсор на допустимую зону (подсветка координат).  
3. Объект размещается с рамкой выделения.  
4. Настройте свойства в правой панели.

### 4.3. Выделение и удаление
- Клик по объекту: выделение рамкой + панель настроек.  
- Клик по пустому месту: снятие выделения.  
- Кнопка "Удалить объект": удаление выделенного объекта.  

### 4.4. Режимы управления светофорами
| Название              | Описание                                  | Периодичность | Активация |
|-----------------------|-------------------------------------------|---------------|-----------|
| Автоматический        | Цикл: зелёный→жёлтый→красный            | 1 сек/фаза    | "Старт цикла" |
| Ручное управление     | Выбор цвета по клику                       | Немедленно    | Кнопки цветов |
| Режим сбоя            | Мерцание жёлтого сигнала светофора       | 1 с           | "Режим сбоя" |
| Режим по времени       | Зелёный↔Красный                           | 5 с           | "Режим по времени" |
| Режим по транспорту    | Зелёный при ТС в соседней ячейке         | 500 мс        | "Режим по транспорту" |
| Тест-шаблон           | ТС согласно заданному маршруту           | 7000 мс       | "Тест-шаблон" |
| Тест-рандом           | Случайный маршрут                          | Случайно      | "Тест-рандом" |

### 4.5. Правила движения транспорта
- Нельзя выезжать за пределы дороги.  
- Нельзя выезжать на закрытые участки дороги.  
- Нельзя проезжать, когда на одном из участков зебры есть пешеход.  
- Нельзя проезжать сквозь другой транспорт.  
- Нельзя проезжать на красный.  
- Нельзя выезжать на встречную полосу движения.  

---

## 5. Статистика и база данных
При нажатии кнопки "Таблицы" открывается окно с базами данных.

### 5.1. БД `Traffic_light`
| Обозначение            | Описание                        |
|------------------------|---------------------------------|
| Id_light               | Уникальный ID светофора         |
| Car_count_full_run     | ТС за сессию                     |
| Car_average_in_minute  | Среднее ТС/мин (обновляется каждую минуту) |
| Count_color_switches   | Количество переключений цвета   |

### 5.2. БД `Cars_stats`
| Обозначение        | Описание                        |
|-------------------|---------------------------------|
| Car_id            | ID ТС                            |
| Car_spawn_ticks    | Тики до появления                |
| Car_exit_ticks     | Тики до выезда                  |

`Traffic_light` хранит данные по каждому светофору за всю сессию работы программы, а `Cars_stats` — данные по каждому автомобилю от появления до выезда из города.
